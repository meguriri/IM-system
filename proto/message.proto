syntax = "proto3";

package im;

import "google/protobuf/timestamp.proto";


service MessageService {
    rpc SendMessage(SendMessageReq) returns (SendMessageRes);
    rpc GetHistory(GetHistoryReq) returns (GetHistoryRes);Ã¥ 
}

message  SendMessageReq {
  string from_user = 1;
  string to_user = 2;
  string room_id = 3;
  string content = 4;
  int64 timestamp = 5;
}

message  SendMessageRes {
    bool ok = 1;
    string message_id = 2;
}

message  GetHistoryReq {
  string user_id = 1;
  string peer_user_id = 2;
  string room_id = 3;
  int32 limit = 4;
}

message  GetHistoryRes {
  repeated Message messages = 1;
}

message Message {
    string id = 1;
    string from_user = 2;
    string content = 3;
    int64 timestamp = 4;
}